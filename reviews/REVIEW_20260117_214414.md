# ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ - Issue #20 Sentryã‚¨ãƒ©ãƒ¼ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°å°å…¥

## ãƒ¬ãƒ“ãƒ¥ãƒ¼æ¦‚è¦

- **ãƒ¬ãƒ“ãƒ¥ãƒ¼å®Ÿæ–½æ—¥**: 2026-01-17
- **å¯¾è±¡Issue**: Issue #20: ã‚¨ãƒ©ãƒ¼æ™‚ã«è‡ªå‹•ã§ã‚¤ã‚·ãƒ¥ãƒ¼ã‚’å»ºã¦ãŸã„ï¼ˆSentryå°å…¥ï¼‰
- **ãƒ¬ãƒ“ãƒ¥ãƒ¼æ‹…å½“è€…**: ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
- **ãƒ¬ãƒ“ãƒ¥ãƒ¼çµæœ**: âš ï¸ æ‰¿èªï¼ˆä¿®æ­£å¿…é ˆã®å•é¡Œã‚ã‚Šï¼‰

---

## ç·åˆè©•ä¾¡

å®Ÿè£…ã¯è¨­è¨ˆæ›¸ã«åŸºã¥ã„ãŸæ§‹æˆã¨ãªã£ã¦ãŠã‚Šã€åŸºæœ¬çš„ãªã‚¨ãƒ©ãƒ¼ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°æ©Ÿèƒ½ã¯é©åˆ‡ã«å®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ã€‚ã—ã‹ã—ã€é‡å¤§ãªå•é¡Œã¨ã—ã¦ **Sentry SDKã®åˆæœŸåŒ–è¨­å®šã«ä¸å‚™** ãŒã‚ã‚Šã€ã¾ãŸè»½å¾®ãªå•é¡ŒãŒã„ãã¤ã‹ç™ºè¦‹ã•ã‚Œã¾ã—ãŸã€‚

**è©•ä¾¡**: B (åŸºæœ¬çš„ãªå®Ÿè£…ã¯è‰¯å¥½ã ãŒé‡å¤§ãªä¿®æ­£ãŒå¿…è¦)

---

## è©³ç´°ãªãƒ¬ãƒ“ãƒ¥ãƒ¼çµæœ

### 1. ã‚³ãƒ¼ãƒ‰å“è³ªã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ âš ï¸ å•é¡Œã‚ã‚Š

#### 1.1 ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£é©åˆæ€§

**é‡å¤§ãªå•é¡Œ ğŸš¨**:
- `sentry.client.config.ts:43-44` ã«ç©ºã® `integrations: []` é…åˆ—ãŒã‚ã‚Šã¾ã™
- Sentryã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€BrowserTracingã‚„Replayãªã©ã® ê¸°ë³¸ í†µí•©ãŒ é€šå¸¸å¿…è¦ã¨ã•ã‚Œã¾ã™
- ç©ºã® integrations é…åˆ—ã‚’è¨­å®šã™ã‚‹ã¨ã€Next.js Sentry SDKã®è‡ªåŠ¨çµ±åˆãŒç„¡åŠ¹åŒ–ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™

```typescript
// å•é¡Œã®ã‚ã‚‹ã‚³ãƒ¼ãƒ‰ (sentry.client.config.ts:43-44)
integrations: [
  ],  // ç©ºã®é…åˆ— - è‡ªå‹•çµ±åˆãŒç„¡åŠ¹åŒ–ã•ã‚Œã‚‹
```

**æ¨å¥¨ä¿®æ­£æ¡ˆ**:
```typescript
integrations: [
  new Sentry.BrowserTracing(),
  new Sentry.Replay({
    maskAllText: true,
    blockAllMedia: true,
  }),
],
```

#### 1.2 TypeScriptã®å‹å®‰å…¨æ€§ âœ… è‰¯å¥½

- é©åˆ‡ãªå‹å®šç¾©ãŒä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ (`UserContext` ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãªã©)
- `unknown` å‹ã®ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒé©åˆ‡
- ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ä½¿ç”¨ãŒé©åˆ‡

#### 1.3 ã‚³ãƒ¼ãƒ‰ã®ç°¡æ½”æ€§ âš ï¸ æ”¹å–„ææ¡ˆ

**é‡è¤‡ã‚³ãƒ¼ãƒ‰ã®å•é¡Œ** (`error-handler.ts`):
- `reportGachaError`, `reportBattleError`, `reportAuthError`, `reportApiError` ã®4ã¤ã®é–¢æ•°ãŒéå¸¸ã«é¡ä¼¼ã—ãŸæ§‹é€ ã‚’æŒã£ã¦ã„ã¾ã™
- å„é–¢æ•°ã§ç´„20è¡Œãšã¤ã®é¡ä¼¼ã‚³ãƒ¼ãƒ‰ãŒã‚ã‚Šã€ä¿å®ˆæ€§ã¨ã‚³ãƒ¼ãƒ‰ç°¡æ½”æ€§ã®è¦³ç‚¹ã‹ã‚‰å•é¡ŒãŒã‚ã‚Šã¾ã™

**ç¾åœ¨ã®å®Ÿè£…ä¾‹**:
```typescript
export function reportGachaError(error: Error | unknown, context: { streamerId?: string; userId?: string; cost?: number }) {
  Sentry.withScope((scope) => {
    scope.setTag('category', 'gacha')
    scope.setLevel('error')
    // ... å›ºæœ‰ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆè¨­å®š
    if (error instanceof Error) {
      Sentry.captureException(error)
    } else {
      Sentry.captureMessage(`Gacha error: ${String(error)}`, 'error')
    }
  })
}
```

**æ¨å¥¨æ”¹å–„æ¡ˆ**:
```typescript
function reportCategorizedError(category: string, error: Error | unknown, context: Record<string, unknown>) {
  Sentry.withScope((scope) => {
    scope.setTag('category', category)
    scope.setLevel('error')
    Object.entries(context).forEach(([key, value]) => {
      if (key === 'userId') {
        scope.setUser({ id: String(value) })
      } else {
        scope.setExtra(key, value)
      }
    })
    if (error instanceof Error) {
      Sentry.captureException(error)
    } else {
      Sentry.captureMessage(`${category} error: ${String(error)}`, 'error')
    }
  })
}

export function reportGachaError(error: Error | unknown, context: { streamerId?: string; userId?: string; cost?: number }) {
  reportCategorizedError('gacha', error, context)
}
```

#### 1.4 ãƒ†ã‚¹ãƒˆçµæœ âœ… æˆåŠŸ

- âœ… TypeScriptã‚³ãƒ³ãƒ‘ã‚¤ãƒ«: æˆåŠŸ
- âœ… ESLintãƒã‚§ãƒƒã‚¯: æˆåŠŸï¼ˆè­¦å‘Š0ä»¶ï¼‰
- âœ… Next.jsãƒ“ãƒ«ãƒ‰: æˆåŠŸ

---

### 2. æ½œåœ¨çš„ãªãƒã‚°ã¨ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ âš ï¸ å•é¡Œã‚ã‚Š

#### 2.1 ErrorBoundary ã® SSR å¯¾å¿œ âš ï¸ ä¸­ç¨‹åº¦ã®å•é¡Œ

**å ´æ‰€**: `src/components/ErrorBoundary.tsx:51, 57`

**å•é¡Œ**:
- `window.location.reload()` ã¨ `this.setState` ã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã§ã®ã¿åˆ©ç”¨å¯èƒ½ã§ã™
- Next.jsã®Server Componentsã‚„SSRç’°å¢ƒã§ErrorBoundaryãŒãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™

**ç¾åœ¨ã®å®Ÿè£…**:
```typescript
<button
  onClick={() => window.location.reload()}  // windowãŒundefinedã®å¯èƒ½æ€§
  ...
>
```

**æ¨å¥¨ä¿®æ­£æ¡ˆ**:
```typescript
<button
  onClick={() => {
    if (typeof window !== 'undefined') {
      window.location.reload()
    }
  }}
  ...
>
```

#### 2.2 ã‚¬ãƒãƒ£APIã®ã‚³ã‚¹ãƒˆå€¤ âš ï¸ è»½å¾®ãªå•é¡Œ

**å ´æ‰€**: `src/app/api/gacha/route.ts:74`

**å•é¡Œ**:
- ã‚³ã‚¹ãƒˆãŒãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã¾ã™ (100)
- å°†æ¥çš„ã«ã‚³ã‚¹ãƒˆãŒå¤‰æ›´ã•ã‚ŒãŸå ´åˆã€ã“ã®å€¤ã‚’è¿½å¾“ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™

**ç¾åœ¨ã®å®Ÿè£…**:
```typescript
cost: 100,  // ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰
```

**æ¨å¥¨ä¿®æ­£æ¡ˆ**:
```typescript
// ã‚³ã‚¹ãƒˆã‚’å®šæ•°ã¨ã—ã¦å®šç¾©ã¾ãŸã¯è¨­å®šã‹ã‚‰å–å¾—
cost: body.cost || 100,
```

#### 2.3 SentryåˆæœŸåŒ–ã®ç’°å¢ƒå¤‰æ•° âš ï¸ è»½å¾®ãªå•é¡Œ

**å•é¡Œ**:
- ç’°å¢ƒå¤‰æ•°ãŒæœªè¨­å®šã®å ´åˆã€`process.env.NEXT_PUBLIC_SENTRY_ENVIRONMENT` ãŒ `undefined` ã«ãªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™
- Sentryã¯ `undefined` ã‚’æ–‡å­—åˆ—ã¨ã—ã¦å—ã‘å–ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™

**ç¾åœ¨ã®å®Ÿè£…**:
```typescript
environment: process.env.NEXT_PUBLIC_SENTRY_ENVIRONMENT || process.env.NODE_ENV,
```

**æ¨å¥¨**:
ç¾åœ¨ã®å®Ÿè£…ã¯é©åˆ‡ã§ã™ãŒã€`.env.local.example` ã§ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ã‚’æ¨å¥¨

---

### 3. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¸ã®å½±éŸ¿ âœ… è‰¯å¥½

#### 3.1 ãƒˆãƒ¬ãƒ¼ã‚¹ã‚µãƒ³ãƒ—ãƒ«ãƒ¬ãƒ¼ãƒˆ

**è©•ä¾¡**: é©åˆ‡ âœ…

- æœ¬ç•ªç’°å¢ƒ: 0.1 (10%) - é©åˆ‡ãªè¨­å®š
- é–‹ç™ºç’°å¢ƒ: 1.0 (100%) - é–‹ç™ºæ™‚ã®ãƒ‡ãƒãƒƒã‚°ã«é©åˆ‡

#### 3.2 ãƒªãƒ—ãƒ¬ã‚¤è¨­å®š

**è©•ä¾¡**: é©åˆ‡ âœ…

- `replaysSessionSampleRate: 0.1` - æœ¬ç•ªç’°å¢ƒã§ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³éŒ²ç”»ã‚’åˆ¶é™
- `replaysOnErrorSampleRate: 1.0` - ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã¯å¿…ãšéŒ²ç”»

#### 3.3 ç„¡è¦–ã™ã‚‹ã‚¨ãƒ©ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³

**è©•ä¾¡**: è‰¯å¥½ âœ…

- `ResizeObserver loop limit exceeded` ãªã©ã®æ— å®³ãªã‚¨ãƒ©ãƒ¼ã‚’é©åˆ‡ã«ç„¡è¦–
- ãƒ–ãƒ©ã‚¦ã‚¶æ‹¡å¼µæ©Ÿèƒ½ã‹ã‚‰ã®ã‚¨ãƒ©ãƒ¼ã‚’é™¤å¤–

---

### 4. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ âœ… è‰¯å¥½

#### 4.1 æ©Ÿå¯†æƒ…å ±ã®æ¼æ´©é˜²æ­¢

**è‰¯å¥½ âœ…**:

- `event.user.email` ã¨ `event.user.ip_address` ãŒå‰Šé™¤ã•ã‚Œã¦ã„ã‚‹
- Cookieã¨Authorizationãƒ˜ãƒƒãƒ€ãƒ¼ãŒãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã•ã‚Œã¦ã„ã‚‹
- é–‹ç™ºç’°å¢ƒã¨æœ¬ç•ªç’°å¢ƒã§ãƒ‡ãƒ¼ã‚¿åé›†ãƒ¬ãƒ™ãƒ«ã‚’èª¿æ•´

#### 4.2 ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆè¨­å®š

**è‰¯å¥½ âœ…**:

- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãŒé©åˆ‡ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ (`setUserContext`)
- ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ (`setRequestContext`)
- æ©Ÿå¯†æƒ…å ±ã‚’å«ã‚€å¯èƒ½æ€§ãŒã‚ã‚‹ `setGameContext` ç­‰ã¯ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä½¿ç”¨

#### 4.3 ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—å‡¦ç†

**è‰¯å¥½ âœ…**:

- Reactã®è‡ªå‹•ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã«ã‚ˆã‚Šã€XSSãƒªã‚¹ã‚¯ã‚’è»½æ¸›
- ErrorBoundaryã§ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºãŒé©åˆ‡

---

### 5. è¨­è¨ˆã¨ã®æ•´åˆæ€§ âœ… è‰¯å¥½

#### 5.1 å¿…é ˆãƒ•ã‚¡ã‚¤ãƒ«ã®å­˜åœ¨

- âœ… `sentry.server.config.ts` - ä½œæˆ
- âœ… `sentry.client.config.ts` - ä½œæˆ
- âœ… `sentry.edge.config.ts` - ä½œæˆ
- âœ… `src/lib/sentry/user-context.ts` - ä½œæˆ
- âœ… `src/lib/sentry/error-handler.ts` - ä½œæˆ
- âœ… `src/components/ErrorBoundary.tsx` - ä½œæˆ

#### 5.2 æ©Ÿèƒ½è¦ä»¶ã®å……è¶³

- âœ… Sentry SDKåˆæœŸåŒ–
- âœ… ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã‚¨ãƒ©ãƒ¼ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°
- âœ… ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã‚¨ãƒ©ãƒ¼ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°
- âœ… Edge Runtimeå¯¾å¿œ
- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆè¨­å®š
- âœ… å°‚ç”¨ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ï¼ˆAPIã€èªè¨¼ã€ã‚¬ãƒãƒ£ã€å¯¾æˆ¦ï¼‰

#### 5.3 å—ã‘å…¥ã‚ŒåŸºæº–ã®é”æˆ

- âœ… Sentry SDKãŒæ­£å¸¸ã«åˆæœŸåŒ–ã•ã‚Œã‚‹
- âœ… ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã‚¨ãƒ©ãƒ¼ãŒSentryã«é€ä¿¡ã•ã‚Œã‚‹
- âœ… ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã‚¨ãƒ©ãƒ¼ãŒSentryã«é€ä¿¡ã•ã‚Œã‚‹ï¼ˆè¨­å®šè¦ä¿®æ­£ï¼‰
- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãŒæ­£ã—ãè¨­å®šã•ã‚Œã‚‹
- âœ… æ©Ÿå¯†æƒ…å ±ãŒSentryã«é€ä¿¡ã•ã‚Œãªã„
- âœ… TypeScriptã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ãŒãªã„
- âœ… ESLintã‚¨ãƒ©ãƒ¼ãŒãªã„
- âœ… æ—¢å­˜ã®æ©Ÿèƒ½ã«å›å¸°ãŒãªã„

---

### 6. æ”¹å–„ææ¡ˆ

#### 6.1 å¿…é ˆä¿®æ­£äº‹é … ğŸš¨

1. **sentry.client.config.ts ã® integrations ã‚’ä¿®æ­£**
   - ç©ºã®é…åˆ—ã‚’é©åˆ‡ãª integration ã«ç½®ãæ›ãˆ
   - BrowserTracing ã¨ Replay ã‚’è¿½åŠ 

2. **ErrorBoundary ã® SSR å¯¾å¿œ**
   - `window` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å­˜åœ¨ç¢ºèªã‚’è¿½åŠ 
   - ã¾ãŸã¯ dynamic import ã§ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ã¿ã«ãƒ­ãƒ¼ãƒ‰

#### 6.2 æ¨å¥¨æ”¹å–„äº‹é …

1. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã®ã‚³ãƒ¼ãƒ‰ç°¡æ½”åŒ–**
   - å…±é€šãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æŠ½å‡ºã—ãŸãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã®ä½œæˆ
   - ã‚³ãƒ¼ãƒ‰é‡è¤‡ã®å‰Šæ¸›

2. **ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸**
   - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
   - ErrorBoundary ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãƒ†ã‚¹ãƒˆ

3. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**
   - ç’°å¢ƒå¤‰æ•°ã®å¿…é ˆ/ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æ˜ç¢ºåŒ–
   - é‹ç”¨æ™‚ã®ç›£è¦–é …ç›®ã®æ–‡æ›¸åŒ–

---

## ç·æ‹¬

### å¼·ã¿

1. **åŒ…æ‹¬çš„ãªã‚¨ãƒ©ãƒ¼ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°**: ã‚µãƒ¼ãƒãƒ¼ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã€Edgeã®3ç’°å¢ƒã§çµ±ä¸€çš„ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
2. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¸ã®é…æ…®**: æ©Ÿå¯†æƒ…å ±ã®é©åˆ‡ãªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
3. **ã‚«ãƒ†ã‚´ãƒªåˆ¥ã®ã‚¨ãƒ©ãƒ¼ãƒ¬ãƒãƒ¼ãƒˆ**: æ©Ÿèƒ½ã”ã¨ã®å°‚ç”¨ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã«ã‚ˆã‚‹è©³ç´°ãªå•é¡Œç‰¹å®š
4. **è¨­å®šã®æŸ”è»Ÿæ€§**: ç’°å¢ƒå¤‰æ•°ã«ã‚ˆã‚‹åˆ¶å¾¡ã¨é–‹ç™º/æœ¬ç•ªç’°å¢ƒã®é©åˆ‡ãªåˆ‡ã‚Šåˆ†ã‘

### ä¿®æ­£ãŒå¿…è¦ãªç‚¹

**ğŸš¨ é‡å¤§**: `sentry.client.config.ts` ã®ç©ºã® integrations é…åˆ—ã‚’ä¿®æ­£

**âš ï¸ ä¸­ç¨‹åº¦**: ErrorBoundary ã® SSR å¯¾å¿œã‚’å¼·åŒ–

**ğŸ“ è»½å¾®**:
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã®ã‚³ãƒ¼ãƒ‰ç°¡æ½”åŒ–
- ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã®æ‹¡å¤§

### æœ€çµ‚åˆ¤å®š

**æ¡ä»¶ä»˜ãæ‰¿èª âš ï¸**

é‡å¤§ãªå•é¡Œï¼ˆsentry.client.config.ts ã® integrations ç©ºé…åˆ—ï¼‰ã‚’ä¿®æ­£ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä¿®æ­£å¾Œã€å†ãƒ¬ãƒ“ãƒ¥ãƒ¼ãªã—ã§QAãƒ•ã‚§ãƒ¼ã‚ºã«ç§»è¡Œã§ãã¾ã™ã€‚

---

## ã‚¢ã‚¯ã‚·ãƒ§ãƒ³é …ç›®

### å®Ÿè£…ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¸ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆå¿…é ˆï¼‰

1. **sentry.client.config.ts ã®ä¿®æ­£**:
   ```typescript
   integrations: [
     new Sentry.BrowserTracing(),
     new Sentry.Replay({
       maskAllText: true,
       blockAllMedia: true,
     }),
   ],
   ```

2. **ErrorBoundary ã® SSR å¯¾å¿œ**:
   ```typescript
   onClick={() => {
     if (typeof window !== 'undefined') {
       window.location.reload()
     }
   }}
   ```

### QAã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¸ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆå®Ÿè£…ä¿®æ­£å¾Œï¼‰

1. ä¿®æ­£å¾Œã®ãƒ“ãƒ«ãƒ‰ç¢ºèª
2. ãƒ–ãƒ©ã‚¦ã‚¶ã§ã®ã‚¨ãƒ©ãƒ¼ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°å‹•ä½œç¢ºèª
3. SSR ç’°å¢ƒã§ã® ErrorBoundary å‹•ä½œç¢ºèª

---

## ãƒ¬ãƒ“ãƒ¥ãƒ¼å±¥æ­´

| æ—¥ä»˜ | ãƒ¬ãƒ“ãƒ¥ãƒ¼è€… | åˆ¤å®š | å‚™è€ƒ |
|:---|:---|:---|:---|
| 2026-01-17 | ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ | æ¡ä»¶ä»˜ãæ‰¿èª | é‡å¤§ãªå•é¡Œ1ä»¶ã€ä¸­ç¨‹åº¦1ä»¶ã€è»½å¾®2ä»¶ |

---

**ãƒ¬ãƒ“ãƒ¥ãƒ¼å®Œäº†ï¼ˆæ¡ä»¶ä»˜ãï¼‰**
ç½²å: ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
æ—¥ä»˜: 2026-01-17
ä¿®æ­£åå†ãƒ¬ãƒ“ãƒ¥ãƒ¼å¾…ã¡